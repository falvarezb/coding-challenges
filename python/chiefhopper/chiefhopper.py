from functools import reduce

def chief_hopper(arr):
    """
    Key facts
    =========

    1. energy = 2*energy - height
    2. f(energy-1) = f(energy) - 2^(length of arr)

    """
    max_height = max(arr)
    energy = reduce(lambda e,h: e*2-h, arr, max_height)
    return max_height - energy//2**(len(arr))


if __name__ == "__main__":
    print(chief_hopper([4,4]))
    print(chief_hopper([3,4,3,2,4]))
    print(chief_hopper([1401,2019,1748,3785,3236,3177,3443,3772,2138,1049,353,908,310,2388,1322,88,2160,2783,435,2248,1471,706,2468,2319,3156,3506,2794,1999,1983,2519,2597,3735,537,344,3519,3772,3872,2961,3895,2010,10,247,3269,671,2986,942,758,1146,77,1545,3745,1547,2250,2565,217,1406,2070,3010,3404,404,1528,2352,138,2065,3047,3656,2188,2919,2616,2083,1280,2977,2681,548,4000,1667,1489,1109,3164,1565,2653,3260,3463,903,1824,3679,2308,245,2689,2063,648,568,766,785,2984,3812,440,1172,2730]))
